create database SP_Medical_Group 

use SP_Medical_Group 

CREATE TABLE CLINICA(
	ID INT IDENTITY PRIMARY KEY
	,RAZAO_SOCIAL VARCHAR(255) NOT NULL
	,ENDERECO VARCHAR(255) NOT NULL
	,CNPJ VARCHAR (30) NOT NULL
	,HORARIO_ATENDIMENTO DATETIME NOT NULL
);

CREATE TABLE ESPECIALIDADES(
	ID INT IDENTITY PRIMARY KEY(ID)
	,NOME VARCHAR(255) NOT NULL
);

CREATE TABLE TIPO_USUARIO(
	ID INT IDENTITY PRIMARY KEY
	,POSICAO VARCHAR(255) NOT NULL
);

CREATE TABLE USUARIOS(
	ID INT IDENTITY PRIMARY KEY
	,ID_TIPO_USUARIO INT FOREIGN KEY REFERENCES TIPO_USUARIO(ID)
	,EMAIL VARCHAR(255) NOT NULL
	,SENHA VARCHAR(255) NOT NULL
);
 
CREATE TABLE MEDICOS(
	ID INT IDENTITY PRIMARY KEY
	,NOME VARCHAR(255) NOT NULL
	,CRM VARCHAR (30) NOT NULL
	,EMAIL VARCHAR(255) NOT NULL
	,ID_ESPECIALIDADES INT FOREIGN KEY REFERENCES ESPECIALIDADES(ID) 
	,TELEFONE VARCHAR (30) NOT NULL
	,ID_USUARIO INT FOREIGN KEY REFERENCES USUARIOS(ID)
	,ID_CLINICA INT FOREIGN KEY REFERENCES CLINICA(ID)
);

CREATE TABLE PACIENTES(
	ID INT IDENTITY PRIMARY KEY 
	,NOME VARCHAR(255) NOT NULL
	,CPF VARCHAR (30) NOT NULL
	,DATA_NASCIMENTO DATETIME NOT NULL
	,RG VARCHAR (30) NOT NULL
	,ENDERECO VARCHAR(255) NOT NULL
	,TELEFONE VARCHAR (30) NOT NULL
	,ID_USUARIO INT FOREIGN KEY REFERENCES USUARIOS(ID)
);

CREATE TABLE AGENDAMENTO_CONSULTA(
	ID INT IDENTITY PRIMARY KEY
	,ID_PACIENTE INT FOREIGN KEY REFERENCES PACIENTES(ID)
	,ID_MEDICO INT FOREIGN KEY REFERENCES MEDICOS(ID)
	,DATA_HORA DATETIME NOT NULL
	,PRONTUARIO VARCHAR(255) NOT NULL
	,STATUS VARCHAR(255) NOT NULL
);

SELECT * FROM ESPECIALIDADES;

INSERT INTO ESPECIALIDADES(NOME)
VALUES ('Acupuntura')
,('Anestesiologia')
,('Angiologia')
,('Cardiologia')
,('Cirurgia Cardiovascular')
,('Cirurgia da Mão')
,('Cirurgia do Aparelho Digestivo')
,('Cirurgia Geral')
,('Cirurgia Pediátrica')
,('Cirurgia Plástica')
,('Cirurgia Torácica')
,('Cirurgia Vascular')
,('Dermatologia')
,('Radioterapia')
,('Urologia')
,('Pediatria')
,('Psiquiatria')

SELECT * FROM MEDICOS;

INSERT INTO MEDICOS(CRM, NOME, EMAIL, ID_ESPECIALIDADES, TELEFONE)
VALUES ('54356-SP','Ricardo Lemos','ricardo.lemos@spmedicalgroup.com.br',2, '4587438')
	  ,('53452-SP','Roberto Possarle','roberto.possarle@spmedicalgroup.com.br',17,'6326632')
	  ,('65463-SP','Helena Strada','helena.souza@spmedicalgroup.com.br',16,'623634264')


SELECT * FROM PACIENTES;

INSERT INTO PACIENTES(NOME,DATA_NASCIMENTO,TELEFONE,RG,CPF,ENDERECO)
VALUES('Ligia','13/10/1983','11 3456-7654','43522543-5','94839859000','Rua Estado de Israel 240, São Paulo Estado de São Paulo, 04022-000')
	 ,('Alexandre','23/07/2001','11 98765-6543','32654345-7','73556944057','Av. Paulista, 1578 - Bela Vista, São Paulo - SP, 01310-200')
	 ,('Fernando','10/10/1978','11 97208-4453','54636525-3','16839338002','Av. Ibirapuera - Indianópolis, 2927,  São Paulo - SP, 04029-200')
	 ,('Henrique','13/10/1985','11 3456-6543','54366362-5','14332654765','R. Vitória, 120 - Vila Sao Jorge, Barueri - SP, 06402-030')
	 ,('João','27/08/1975','11 7656-6377','t32544444-1','91305348010','R. Ver. Geraldo de Camargo, 66 - Santa Luzia, Ribeirão Pires - SP, 09405-380')
	 ,('Bruno','21/03/1972','11 95436-8769','54566266-7','79799299004','Alameda dos Arapanés, 945 - Indianópolis, São Paulo - SP, 04524-001')
	 ,('Mariana','05/03/2018','11 9273-2842','54566266-8','13771913039','R Sao Antonio, 232 - Vila Universal, Barueri - SP, 06407-140')

SELECT * FROM USUARIOS;

INSERT INTO USUARIOS(EMAIL, SENHA)
VALUES('ligia@gmail.com','14525')
,('alexandre@gmail.com','52634')
,('fernando@gmail.com','72990')
,('henrique@gmail.com','73845')
,('joao@hotmail.com','06532')
,('bruno@gmail.com','04723')
,('mariana@outlook.com','49013')

SELECT * FROM AGENDAMENTO_CONSULTA;

INSERT INTO AGENDAMENTO_CONSULTA(PRONTUARIO,ID_MEDICO,DATA_HORA,STATUS)
VALUES('Mariana','5','20/01/2019 15:00','Realizada')
,('Alexandre','4','06/01/2018 10:00','Cancelada')
,('Fernando','4','07/02/2019 11:00','Realizada')
,('Alexandre','4','06/02/2018 10:00','Realizada')
,('Henrique','3','07/02/2019 11:00','Cancelada')
,('Mariana','5','08/02/2019 15:00','Agendada')
,('Henrique','3','09/02/2019 11:00','Agendada')


SELECT 
	MEDICOS. *
	,AGENDAMENTO_CONSULTA. *
FROM
	MEDICOS INNER JOIN AGENDAMENTO_CONSULTA
ON
	AGENDAMENTO_CONSULTA.ID_MEDICO = MEDICOS.ID

SELECT
	PACIENTES. *
	, AGENDAMENTO_CONSULTA. *
FROM 
	PACIENTES INNER JOIN AGENDAMENTO_CONSULTA
ON
	AGENDAMENTO_CONSULTA.ID_PACIENTE = PACIENTES.ID